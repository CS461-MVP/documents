<template>
    <require from="resources/elements/pdf-document"></require>

  <!--
This is just a regular Aurelia viewmodel. We import the pdf-document element that
we created, and we bind viewmodel properties to it.
-->
  <section class="rightTabInstance">
      <md-navbar>
        <span class="spacer"><span class="brand-logo">${title}</span></span>
        <ul class="hide-on-med-and-down right">
          <md-switch md-label-on="UNUSED CHAPTERS" md-label-off="ALL CHAPTERS" class="unassoc-switch" md-checked.bind="unassociated"></md-switch>
        </ul>
      </md-navbar>
      </ul>
      <div class="col-sm-8">
        <ul md-collapsible>
          <div class="">
            <ul class="draggable-header nav">
              <!-- <dragula-and-drop drop-fn.call="itemDropped(item, target, source, sibling, itemVM, siblingVM)"></dragula-and-drop> -->
              <li repeat.for="chapter of chapters " class="drag-source drop-target chapter ${chapter.isActive ? 'active' : ''}" data-search="true" data-author="${chapter.author}" data-uuid="${chapter.uuid}"  data-name="${chapter.name}" data-index="${$index}">
                <md-card md-title="${chapter.name}">
                  <div>
                    <p>Scraps: ${chapter.scraps.length}</p>
                    <!-- <p class="buttonOptions">
                      <a class="on-white previewEditLinks" route-href="route: PDFViewer; params.bind: {type: 'chapters', author: chapter.author, uuid: chapter.uuid}" md-tooltip="position: bottom; text: Preview Chapter;">
                        <i class="material-icons">pageview</i></a>
                      <a class="on-white previewEditLinks" route-href="route: editchapter; params.bind: {author: chapter.author, uuid: chapter.uuid}" md-tooltip="position: bottom; text: Edit Chapter;">
                        <i class="material-icons">mode_edit</i></a>
                      <a class="on-white previewEditLinks" target="_blank" href="https://remix.ist/chapters/${chapter.author}/${chapter.uuid}/pdf" md-tooltip="position: bottom; text: Open Chapter Externally;">
                        <i class="material-icons">open_in_new</i></a>
                    </p> -->
                  </div>
                </md-card>
              </li>
            </ul>
          </div>
        </ul>
      </div>
      <div class="fixed-action-btn" id="left-pane-button">
       <a route-href="route: newchapter;" md-button="floating: true; large: true;" md-tooltip="position: left; text: Add New Chapter;" md-waves="color: light; circle: true;">
         <i class="large material-icons">note_add</i>
       </a>
     </div>
  </section>

</template>
